import{r as p,j as e,c as L}from"./client-Dv7fwF0B.js";import{b,i as M,v as H}from"./index-C0t_nZK7.js";const y="veepn-breach-alert",x=new Map,h=new Map,j=async function(t){if(await Promise.resolve(),M(t)){const s=t.id?x.get(t.id):x.get(t.type);s&&s(t);const i=t.id?h.get(t.id):h.get(t.type);i&&i.forEach(n=>{n(t)})}};b.runtime.onMessage.addListener(j);const A=function(){b.runtime.onMessage.removeListener(j)};window.addEventListener("beforeunload",A);function g(){return async function(t,...s){return new Promise(i=>{const n=H();x.set(n,c=>{x.delete(n),i(c)});const r={type:t,id:n,data:s[0]??{}};b.runtime.sendMessage(r).catch(()=>{})})}}function D(){return function(t,s){const i=h.get(t)??[];return i.push(s),h.set(t,i),()=>{var r;const n=((r=h.get(t))==null?void 0:r.filter(c=>c===s))??[];n.length===0?h.delete(t):h.set(t,n)}}}const _=g(),z=D(),d=g(),v=g(),S=""+new URL("x-close-cross-BQABqpBb.svg",import.meta.url).href;function F(a,t=250){let s=!1,i;const n=()=>{i===null?s=!1:(a(...i),i=null,setTimeout(n,t))};return(...r)=>{if(s){i=r;return}a(...r),s=!0,setTimeout(n,t)}}function R(a){p.useEffect(()=>{const t=function(n){var c;((c=n.target)==null?void 0:c.closest(`#${y}`))||a()},s=F(a);return document.addEventListener("click",t,!0),window.addEventListener("scroll",s,!0),()=>{document.removeEventListener("click",t,!0),window.removeEventListener("scroll",s,!0)}},[])}const B=""+new URL("logo-veepn-DYzqQ5GZ.svg",import.meta.url).href;function U(){return e.jsxs("div",{className:"header-expand",children:[e.jsx("img",{src:B,alt:"veepn",width:"59",height:"16"}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:"Breach Alert"})]})}const P=""+new URL("alert-BEaDoEhr.svg",import.meta.url).href;function T(){return e.jsxs("div",{className:"header-collapse",children:[e.jsx("img",{src:P,alt:"veepn",width:"16",height:"16"}),e.jsx("b",{children:"Breach Alert:"}),e.jsx("span",{children:"This website has been noticed in a data breach."})]})}function I({data:a,onSubmit:t}){const i=`${a.records.toLocaleString()} user records exposed`,n=a.description,r=a.assets.length!==0,c=a.breachDate,u=a.acquisitionDate,l=n||r||c||u,o=function(f){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(f))};return e.jsx("div",{className:"breach-info",children:e.jsxs("div",{className:"breach-info__inner",children:[e.jsx("p",{className:"breach-info__alert",children:i}),l&&e.jsxs("div",{className:"breach-info__list",children:[n&&e.jsxs("div",{className:"breach-info__item",children:[e.jsx("p",{className:"breach-info__title",children:"About this breach"}),e.jsx("div",{className:"breach-info__description",children:a.description})]}),r&&e.jsxs("div",{className:"breach-info__item",children:[e.jsx("p",{className:"breach-info__title",children:"Personal data leaked"}),e.jsx("div",{className:"breach-info__description",children:e.jsx("ul",{children:a.assets.map(m=>e.jsx("li",{children:m}))})})]}),c&&e.jsxs("div",{className:"breach-info__item",children:[e.jsx("p",{className:"breach-info__title",children:"Date of breach"}),e.jsx("div",{className:"breach-info__description",children:o(a.breachDate)})]}),!c&&u&&e.jsxs("div",{className:"breach-info__item",children:[e.jsx("p",{className:"breach-info__title",children:"Entry date"}),e.jsx("div",{className:"breach-info__description",children:o(a.acquisitionDate)})]})]}),e.jsx("div",{className:"breach-info__actions",children:e.jsx("button",{className:"breach-info__btn",type:"button",onClick:t,children:"Check my data"})})]})})}function q({state:a,onClick:t,onHover:s}){return e.jsxs("svg",{className:`button-expand button-expand--${a}`,xmlns:"http://www.w3.org/2000/svg",width:"90",height:"22",fill:"none",children:[e.jsx("path",{className:"button-expand__pointer",fill:"#DE4558",d:"M0 0h90S76.736.521 70.667 5.5c-2.39 1.961-3.796 4.589-5.2 7.214-1.426 2.664-2.85 5.326-5.3 7.286-2.5 2-7.167 2-7.167 2H37s-4.667 0-7.167-2c-2.45-1.96-3.874-4.622-5.3-7.286-1.404-2.625-2.81-5.253-5.2-7.214C13.264.521 0 0 0 0Z",onClick:t,onMouseEnter:s}),e.jsx("path",{className:"button-expand__arrow",fill:"#fff",fillRule:"evenodd",d:"M40.22 9.47a.75.75 0 0 1 1.06 0l3.47 3.47 3.47-3.47a.75.75 0 1 1 1.06 1.06l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}),e.jsx("path",{className:"button-expand__alert",fill:"#fff",fillRule:"evenodd",d:"M45.333 5c.636 0 1.23.311 1.593.831l.07.107 5.41 9.032a1.942 1.942 0 0 1-1.538 2.909l-.13.005H39.92a1.943 1.943 0 0 1-1.721-2.8l.066-.123 5.406-9.026A1.944 1.944 0 0 1 45.332 5Zm-.116 9.151.12-.006.11.006a.944.944 0 0 1 .835.944.952.952 0 0 1-.834.943l-.12.006-.111-.006a.945.945 0 0 1-.834-.944.953.953 0 0 1 .834-.943Zm.112-5.93a.846.846 0 0 0-.84.747l-.007.099v3.385l.006.099a.847.847 0 0 0 1.681 0l.006-.1V9.068l-.006-.1a.846.846 0 0 0-.84-.746Z",clipRule:"evenodd"})]})}function O({data:a,onClose:t,onSubmit:s}){const[i,n]=p.useState("minimize"),r=i==="expand";R(function(){n("minimize")});const u=function(){i==="minimize"&&(n("collapse"),d("send-analytic-event",{types:["google-analytics","aws-kinesis","amplitude"],name:"breach_banner_2_view"}).catch(()=>{}))},l=function(){switch(i){case"minimize":n("collapse");break;case"collapse":n("expand"),d("send-analytic-event",{types:["google-analytics","aws-kinesis","amplitude"],name:"breach_banner_expand_click"}).catch(()=>{});break;default:n("collapse");break}},o=function(C){C.stopPropagation(),t(),d("send-analytic-event",{types:["google-analytics","aws-kinesis","amplitude"],name:"breach_banner_close_click",data:{value:r?3:2}}).catch(()=>{})},m=function(){i==="collapse"&&(n("expand"),d("send-analytic-event",{types:["google-analytics","aws-kinesis","amplitude"],name:"breach_banner_expand_click"}).catch(()=>{}))};return p.useEffect(()=>{d("send-analytic-event",{types:["google-analytics","aws-kinesis","amplitude"],name:"breach_banner_1_view"}).catch(()=>{})},[]),e.jsx("div",{className:`breach-popup breach-popup--${i}`,children:e.jsxs("div",{className:"breach-popup__inner",children:[e.jsxs("div",{className:"breach-popup__header",tabIndex:0,role:"button",onClick:m,children:[r?e.jsx(U,{}):e.jsx(T,{}),e.jsx("button",{className:"breach-popup__close",type:"button",onClick:o,children:e.jsx("img",{src:S,alt:"close",width:"16",height:"16"})})]}),e.jsx("div",{className:"breach-popup__wrap",children:e.jsx("div",{className:"breach-popup__content",children:e.jsx(I,{data:a,onSubmit:s})})}),e.jsx(q,{state:i,onClick:l,onHover:u})]})})}function $(){const[a,t]=p.useState({user:null,slots:null,subscription:null,hasBundle:!1,canUsePremium:!1}),[s,i]=p.useState(!1),[n,r]=p.useState(),c=function(){const o=window.location.host;_("set-breach-alert-exclusion",{domain:o}).catch(()=>{}).finally(()=>{i(!1)}),d("send-analytic-event",{types:["google-analytics","aws-kinesis","amplitude"],name:"breach_banner_close_click"}).catch(()=>{})},u=function(){a.canUsePremium?v("show-account-page",{route:"/breach-alert/",params:{utm_campaign:"breach_banner"}}).catch(()=>{}):d("show-website-page",{page:"breachAlert",params:{utm_campaign:"breach_banner"}}).catch(()=>{});const o=a.canUsePremium?"premium":"free";d("send-analytic-event",{types:["google-analytics","aws-kinesis","amplitude"],name:"breach_banner_cta_click",data:{user_type:o}}).catch(()=>{})};return p.useEffect(()=>{v("get-user-data").then(l=>{l.success&&t(l.data)}).catch(()=>{})},[]),p.useEffect(()=>{const l=window.location.host;_("get-breach-alert-site-data",{domain:l}).then(o=>{o.success&&r(o.data)}).catch(()=>{})},[]),p.useEffect(()=>(_("get-breach-alert").then(o=>{o.success&&i(o.data.status)}).catch(()=>{}),z("active-state-changed",o=>{o.success&&i(o.data.status)})),[]),s&&(n==null?void 0:n.hasLeak)&&e.jsx(O,{data:n.data,onClose:c,onSubmit:u})}const V=".breach-popup{font-family:FigtreeVF,sans-serif;position:fixed;z-index:2147483638;text-rendering:optimizelegibility;top:0;left:0;right:0;pointer-events:none;padding-inline:16px;height:0;overflow:visible;color:#222e3a}.breach-popup *{box-sizing:border-box}.breach-popup__inner{background-color:#de4558;width:100%;border-radius:16px;margin-inline:auto;pointer-events:all;position:relative;transition:transform .25s ease-in-out,max-width .25s ease-in-out;transform:translateY(16px);max-height:calc(100svh - 80px);display:flex;flex-direction:column}.breach-popup__header{min-height:32px;display:flex;align-items:center;justify-content:space-between;column-gap:16px;padding:4px;cursor:pointer}.breach-popup__close{cursor:pointer;background-color:transparent;border-style:none;outline:none;display:flex;align-items:center;justify-content:center;width:24px;height:24px;flex-shrink:0;opacity:.5}.breach-popup__wrap{display:grid;grid-template-rows:0fr;transition:grid-template-rows .25s ease-in-out;overflow:hidden}.breach-popup__content{overflow:hidden;opacity:0;transform:translateY(-10px)}.breach-popup--minimize .breach-popup__inner{max-width:485px;transform:translateY(-100%)}.breach-popup--collapse .breach-popup__inner{max-width:485px}.breach-popup--expand .breach-popup__inner{max-width:1120px}.breach-popup--expand .breach-popup__wrap{grid-template-rows:1fr}.breach-popup--expand .breach-popup__content{opacity:1;transform:translateY(0);transition:transform .25s ease-in-out,opacity .25s ease-in-out;transition-delay:.15s}.breach-popup--expand .breach-popup__header{cursor:default}.breach-info{padding:2px;height:100%}.breach-info__inner{padding:22px 22px 0;background-color:#fff;border-bottom-left-radius:15px;border-bottom-right-radius:15px;height:100%;overflow:auto}.breach-info__alert{font-size:24px;line-height:32px;font-weight:700;margin:0}.breach-info__list{margin-top:24px;display:flex;flex-wrap:wrap;gap:24px}@media only screen and (width >= 992px){.breach-info__list{flex-wrap:nowrap}}.breach-info__item{width:100%}.breach-info__item:nth-child(2){max-width:320px}.breach-info__item:nth-child(3){max-width:200px}.breach-info__title{font-size:18px;font-weight:700;line-height:32px;letter-spacing:-.1px;color:#de4558;margin-top:0;margin-bottom:4px}.breach-info__description{font-size:16px;line-height:28px;letter-spacing:-.1px}.breach-info__description ul{margin:0}.breach-info__actions{display:flex;justify-content:center;padding-top:32px;padding-bottom:22px;background-color:#fff;position:sticky;bottom:0}.breach-info__btn{cursor:pointer;border-style:none;outline:none;display:inline-flex;align-items:center;height:48px;padding-inline:20px;border-radius:12px;text-align:center;font-size:16px;font-weight:700;line-height:28px;letter-spacing:-.1px;color:#fff;background-color:#ff6400}.button-expand{position:absolute;bottom:0;left:50%;transform:translate(-50%,100%);z-index:1}.button-expand__pointer{cursor:pointer}.button-expand__alert{pointer-events:none;transition:opacity .25s ease-in-out}.button-expand__arrow{pointer-events:none;transition:transform .25s ease-in-out,opacity .25s ease-in-out;transform-origin:center}.button-expand--minimize .button-expand__arrow,.button-expand--collapse .button-expand__alert,.button-expand--expand .button-expand__alert{opacity:0}.button-expand--expand .button-expand__arrow{transform:rotate(180deg)}.header-collapse{display:flex;align-items:center;flex-wrap:wrap;column-gap:4px;padding-left:8px;font-size:14px;line-height:20px;letter-spacing:-.1px;color:#fff}.header-expand{display:flex;align-items:center;flex-wrap:wrap;column-gap:4px;padding-left:20px;font-size:14px;font-weight:500;line-height:20px;letter-spacing:-.1px;color:#fff}",Z='@font-face{font-family:FigtreeVF;src:url(${extensionUrl}fonts/FigtreeVF.woff2) format("woff2 supports variations"),url(${extensionUrl}fonts/FigtreeVF.woff2) format("woff2-variations");font-weight:100 1000;font-display:swap}',w=document.createElement("div");w.id=y;const k=w.attachShadow({mode:"open"}),N=document.createElement("style");N.innerText=V;L(k).render(e.jsx(p.StrictMode,{children:e.jsx($,{})}));k.appendChild(N);document.body.append(w);const Y=b.runtime.getURL(""),E=document.createElement("style");E.innerText=Z.replaceAll("${extensionUrl}",Y);document.body.append(E);
